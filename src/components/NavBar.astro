---
import MenuIcon from "./MenuIcon.astro";
---

<nav
  class="navbar mx-auto flex w-full max-w-7xl flex-col px-10 py-4 lg:flex-row"
>
  <div class="flex items-center justify-between">
    <div
      class="w-20 flex-shrink-0 rounded-lg p-2 outline-neutral-200 transition-shadow duration-300 ease-in-out hover:shadow-lg hover:outline"
    >
      <a href="/">
        <img src="/logo.png" />
      </a>
    </div>
    <div
      data-open="false"
      class="menu-btn h-10 w-10 cursor-pointer rounded-lg p-1 outline-neutral-200 transition-shadow duration-300 ease-in-out hover:shadow-lg hover:outline"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="2"
        stroke="currentColor"
        class="close-icon hidden h-8 w-8 text-primary lg:hidden"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M6 18L18 6M6 6l12 12"></path>
      </svg>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="2"
        stroke="currentColor"
        class="menu-icon h-8 w-8 text-primary lg:hidden"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path>
      </svg>
    </div>
  </div>
  <ul
    class="navlist hidden grow flex-col items-center justify-end gap-6 font-bold text-primary lg:flex lg:flex-row"
  >
    <li>
      <a class="hover:underline" href="news">News</a>
    </li>
    <li>
      <a class="hover:underline" href="organization">Organization</a>
    </li>
    <li>
      <a class="hover:underline" href="program">Program</a>
    </li>
    <li>
      <a class="hover:underline" href="calls">Calls</a>
    </li>
    <li>
      <a class="hover:underline" href="submission">Submission</a>
    </li>
    <li>
      <a class="hover:underline" href="information">Information</a>
    </li>
    <li>
      <a class="hover:underline" href="attend">Attend</a>
    </li>
    <li>
      <a class="hover:underline" href="sponsors">Sponsors</a>
    </li>
    <li>
      <a class="hover:underline" href="contact">Contact</a>
    </li>
  </ul>

  <script>
    const navbar = document.querySelector(".navbar") as HTMLElement;
    const navList = document.querySelector(".navlist") as HTMLElement;
    const menuBtn = document.querySelector(".menu-btn") as HTMLElement;
    const menuIcon = document.querySelector(".menu-icon") as HTMLElement;
    const closeIcon = document.querySelector(".close-icon") as HTMLElement;

    menuBtn.addEventListener("click", () => {
      menuBtn.dataset.open === "false"
        ? (menuBtn.dataset.open = "true")
        : (menuBtn.dataset.open = "false");

      // show closeIcon
      if (menuBtn.dataset.open === "true") {
        menuIcon.classList.add("disappear");

        navList.classList.remove("hidden");
        navList.classList.add("flex");
        navbar.classList.add("backdrop-blur");
        navbar.classList.add("bg-neutral-100/80");
      }
      // show menuIcon
      if (menuBtn.dataset.open === "false") {
        closeIcon.classList.add("disappear");

        navList.classList.add("hidden");
        navList.classList.remove("flex");
        navbar.classList.remove("backdrop-blur");
        navbar.classList.remove("bg-neutral-100/80");
      }
    });

    menuIcon.addEventListener("animationend", () => {
      if (menuBtn.dataset.open === "true") {
        menuIcon.classList.add("hidden");
        closeIcon.classList.remove("hidden");
        closeIcon.classList.add("appear");
      }
      menuIcon.classList.remove("appear");
      menuIcon.classList.remove("disappear");
      closeIcon.classList.remove("disappear");
    });

    closeIcon.addEventListener("animationend", () => {
      if (menuBtn.dataset.open === "false") {
        closeIcon.classList.add("hidden");
        menuIcon.classList.remove("hidden");
        menuIcon.classList.add("appear");
      }
      closeIcon.classList.remove("appear");
      closeIcon.classList.remove("disappear");
      menuIcon.classList.remove("disappear");
    });
  </script>
</nav>

<style>
  @keyframes appear {
    0% {
      display: none;
      opacity: 0;
      transform: scale(0.9);
    }
    10% {
      display: block;
      opacity: 0;
      transform: scale(0.9);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }
  .appear {
    animation: appear 0.1s ease-in forwards;
  }
  .disappear {
    animation: appear 0.1s ease-in reverse forwards;
  }
</style>
